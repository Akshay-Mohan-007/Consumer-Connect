<!--
 ***************************************************************************************************************************************
 * NAME   : CC_WaiverConfirmation
 * DESCRIPTION  : Confirms/rejects the application
 *    
 * @AUTHOR   : Nidhin V K
 * @DATE   : 11-27-2017
 *
 * MODIFICATION LOG:  
 * ______________________________________________________________________________________________________________________________________
 * DEVELOPER                DATE                DESCRIPTION 
 * ______________________________________________________________________________________________________________________________________
 * Nidhin V K               11-27-2017          Initial version        
 * Sayari Mandal            11-12-2017          UI changes
 ****************************************************************************************************************************************
-->
<aura:component access="global" controller="CC_WaiverConfirmationController" extends="c:CC_BaseSuperComponent" implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes,force:lightningQuickAction">
    <aura:attribute name="mapLabels" type="Map"/>
    <aura:attribute name="bIsComplete" type="Boolean" default="true"/>
    <aura:attribute name="lstPrograms" type="List"/>
    <aura:attribute name="sSuggestedProgramId" type="String"/> 
    <aura:attribute name="sComments" type="String"/> 
    <aura:attribute name="bDisableYesRadio" type="Boolean" default="false"/>
    <aura:attribute name="sModuleName" type="String" default="Application_Review"/> 
    <aura:attribute name="sAppId" type="String" default="a0B18000002aT55"/>
    <aura:attribute name="bHasError" type="Boolean" default="false"/>
    <aura:attribute name="bProgramError" type="Boolean" default="false"/>
    <aura:attribute name="bCommentError" type="Boolean" default="false"/>
    <aura:attribute name="lstErrors" type="List"/>
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <aura:method name="save" action="{!c.save}" access="PUBLIC">
        <aura:attribute name="callback" type="Function"/>
    </aura:method>
    <aura:method name="submit" action="{!c.submit}" access="PUBLIC">
        <aura:attribute name="callback" type="Function"/>
    </aura:method>
    
    <c:CC_SubPageHeader iconName="standard:document" pageName="{!v.mapLabels.CC_LBL_WAIVER_CONFIRMATION}" 
  						errorListShow="{!v.lstErrors.length> 0}" lstErrors='{!v.lstErrors}' />
    
    <lightning:layout horizontalAlign="left" multipleRows="true" class="slds-theme--default">
       <lightning:layoutItem flexibility="grow" size="12" largeDeviceSize="6" mediumDeviceSize="4" smallDeviceSize="12" class="slds-p-around_small">
            <div class="slds-text-body_small slds-m-bottom_x-small">{!v.mapLabels.CC_Is_This_Waiver_Application_Complete}</div>
            <lightning:input type="radio" label="Yes" name="bIsComplete" checked="{!v.bIsComplete == true}" value="true" onchange="{!c.handleRadioClick}" disabled="{!v.bDisableYesRadio}"/>
            <lightning:input type="radio" label="No" name="bIsComplete" checked="{!v.bIsComplete == false}" value="false" onchange="{!c.handleRadioClick}"/> 
        </lightning:layoutItem>
    </lightning:layout>
    <aura:if isTrue="{!v.bIsComplete}">
	    <lightning:layout horizontalAlign="left" multipleRows="true" class="slds-theme--default">
            <lightning:layoutItem flexibility="grow" size="12" largeDeviceSize="6" mediumDeviceSize="4" smallDeviceSize="12" class="slds-p-around_small">
	            <lightning:select name="WaiverProg"
	                              value="{!v.sSuggestedProgramId}"
	                              onchange="{!c.renderValues}"
	                              label="{!v.mapLabels.CC_Waiver_Prog_Referred_To_Indiviual}"
	                              class="{! and(v.bHasError,v.bProgramError) ? 'slds-has-error required-asterisk' : 'required-asterisk'}"
	                              >
	                <aura:iteration items="{!v.lstPrograms}" var="val">
	                    <option text="{!val.sValue}" value="{!val.sKey}" selected="{!val.sKey == v.sSuggestedProgramId}"/>	
	                </aura:iteration>
	            </lightning:select>
	        </lightning:layoutItem>
	    </lightning:layout>
    </aura:if>
    <!-- <lightning:textarea value="{!v.sComments}" label="{!(v.bIsComplete == false) ? v.mapLabels.CC_LBL_COMMENTS_TO_APP_INITIATOR : ((v.sSuggestedProgramId == v.mapLabels.CC_NONE || v.sSuggestedProgramId == v.mapLabels.CC_ALL_OPTIONS) ? v.mapLabels.CC_CRITERIA_NOT_MEETING_REASON : v.mapLabels.CC_LBL_COMMENTS_TO_CAP_REVIEWER)}"/> -->
    <c:CC_Comment aura:id="CMT_WaiverConfirmation" 
			    sMasterRecordId="{!v.sAppId}" 
			    selectedTab="CC_WaiverConfirmation" 
			    bCommentRequired="true"
			    sCommentBody="{!v.sComments}" 
			    sCommentLabel="{!(v.bIsComplete == false) ? v.mapLabels.CC_LBL_COMMENTS_TO_APP_INITIATOR : ((v.sSuggestedProgramId == v.mapLabels.CC_NONE || v.sSuggestedProgramId == v.mapLabels.CC_ALL_OPTIONS) ? v.mapLabels.CC_CRITERIA_NOT_MEETING_REASON : v.mapLabels.CC_LBL_COMMENTS_TO_CAP_REVIEWER)}"
			    bCanEnterComment="true"
			    bCanViewCommentHistory="true"
			    sModuleName="{!v.sModuleName}"
			    sLookupField="Related_Application__c"
			    bShowForPage="true"/>
	
    <!-- <lightning:button variant="brand" label="{!v.mapLabels.CC_Back_Button}" onclick="{!c.back}" />
    <lightning:button variant="brand" label="{!v.mapLabels.CC_Save_Exit}" onclick="{!c.save}" />
    <lightning:button variant="brand" label="{!v.mapLabels.CC_Contact_SubmitButton}" onclick="{!c.submit}" /> -->
</aura:component>