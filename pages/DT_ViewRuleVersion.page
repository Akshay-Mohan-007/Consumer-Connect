<!--VF Page Name : DT_ViewRuleVersion
 * Description  : VF Page to view Rule Versions 
 * Created By   : Shibabrata Debnath
 * Created On   : 08-01-2016

 * Modification Log:  
 * --------------------------------------------------------------------------------------------------------------------------------------
 * Developer                Date        Modification ID      Description 
 * --------------------------------------------------------------------------------------------------------------------------------------
 * Shibabrata Debnath    08-01-2016            1           Initial version
 * Debalina Chatterjee   09-23-2016            2           Inline editable field added
 * Nidhin   			 12-Dec-2017           3           Added Field for prev task
 *
 -->
<apex:page standardController="DT_Rule_Version__c"
	extensions="DT_RuleVersionExtension" id="thePage">
	<apex:sectionHeader title="Rule Version"
		subtitle="{!DT_Rule_Version__c.Name}" />

	<!-- Go Back Link -->
	<div class="ptBreadcrumb">
		&nbsp;Â«&nbsp;
		<apex:outputLink value="/apex/DT_ViewRules?id={!DT_Rule_Version__c.DT_Rule__r.Id}">Back to : Rule
        </apex:outputLink>
	</div>
	<apex:form id="theForm">
		<apex:pageBlock tabStyle="DT_Rule_Version__c"
			title="Rule Version Detail" mode="maindetail" id="pageBlock">
			<apex:pageMessages rendered="{!bShowError}" />
			<apex:pageBlockButtons >
				<apex:commandButton value="Edit" action="{!edit}"
					rendered="{!AND(NOT(DT_Rule_Version__c.DT_IsActive__c), DT_Rule_Version__c.DT_Deactivated_Date__c == NULL)}" />
				<!--<apex:commandButton action="{!deleteVersion}" value="Delete"/>-->
				<!--Button for revising the Version -->
				<apex:commandButton value="Revise" action="{!cloneVersion}"
					rendered="{!OR(DT_Rule_Version__c.DT_IsActive__c, DT_Rule_Version__c.DT_Deactivated_Date__c != NULL)}" />
				<!--Button to Activate/Deactivate the Version based validations in the apex controller-->
				<apex:commandButton value="Activate" action="{!toggleActivate}"
					rendered="{!AND(NOT(DT_Rule_Version__c.DT_IsActive__c), DT_Rule_Version__c.DT_Deactivated_Date__c == NULL)}"
					rerender="pageBlock" />
				<apex:commandButton value="Deactivate" action="{!toggleActivate}"
					rendered="{!AND(DT_Rule_Version__c.DT_IsActive__c, DT_Rule_Version__c.DT_Deactivated_Date__c == NULL)}"
					rerender="pageBlock" />

				<apex:commandButton action="{!save}" id="saveButton" value="Save"
					style="display: none;" />
				<apex:commandButton action="{!cancel}" id="cancelButton"
					value="Cancel" style="display: none;" />
			</apex:pageBlockButtons>

			<apex:pageBlockSection columns="2" collapsible="false"
				id="pageBlockSection1">

				<apex:outputField id="nameID" value="{!DT_Rule_Version__c.Name}" />
				<apex:outputField id="ruleID"
					value="{!DT_Rule_Version__c.DT_Rule__c}" />
				<apex:outputField id="numID"
					value="{!DT_Rule_Version__c.DT_Version_Number__c}" />
				<apex:outputField id="descID"
					value="{!DT_Rule_Version__c.DT_Version_Description__c}" />

				<apex:outputField id="activeID"
					value="{!DT_Rule_Version__c.DT_IsActive__c}" />

				<!--Inline Editable field for users to provide logic-->
				<apex:outputField id="logicId"
					value="{!DT_Rule_Version__c.DT_Criteria_Logic__c}">
					<apex:inlineEditSupport showOnEdit="saveButton, cancelButton"
						event="onclick" resetFunction="resetInlineEdit" />
				</apex:outputField>

				<apex:outputField id="assigntypeID"
					value="{!DT_Rule_Version__c.DT_Assignment_Type__c}" />
				<!-- Assignee field only to be displayed if Assignment type is Manual-->
				<apex:outputField id="assigneeID"
					value="{!DT_Rule_Version__c.DT_Assignee__c}"
					rendered="{!bShowAssigneeType}" />
				<apex:outputField id="prevTask"
					value="{!DT_Rule_Version__c.DT_Assign_To_Owner_Of__c}"
					rendered="{!bShowAssignees}" />

				<!-- Queue name field only to be displayed if Assignment type is Queue-->
				<apex:outputField id="qID"
					value="{!DT_Rule_Version__c.DT_Queue_Name__c}"
					rendered="{!bShowQueue}" />
				<!-- </apex:pageBlockSection>        
            <apex:pageBlockSection columns="2" collapsible="false" id="pageBlockSection2">  -->
				<apex:outputField id="CreatedById"
					value="{!DT_Rule_Version__c.CreatedById}" />
				<apex:outputField id="CreatedDate"
					value="{!DT_Rule_Version__c.LastModifiedById}" />
				<apex:outputField id="LastModifiedId"
					value="{!DT_Rule_Version__c.CreatedDate}" />
				<apex:outputField id="LastModifiedDate"
					value="{!DT_Rule_Version__c.LastModifiedDate}" />
				<apex:outputField id="navId"
					value="{!DT_Rule_Version__c.DT_Navigation__c}" />
			</apex:pageBlockSection>
		</apex:pageBlock>
	</apex:form>
	<!-- Related List of Rule Criteria-->
	<apex:relatedList list="DT_Rule_Criteria__r" />

</apex:page>